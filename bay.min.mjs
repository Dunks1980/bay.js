var __awaiter=this&&this.__awaiter||function(e,t,n,o){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){e.done?n(e.value):i(e.value).then(r,s)}l((o=o.apply(e,t||[])).next())})};const bay=()=>{"use strict";function e(){const e=new CustomEvent("bay_global_event");window.dispatchEvent(e)}function t(){const e=new CustomEvent("bay_route_event");window.dispatchEvent(e)}function n(e){return"string"==typeof e?(S.textContent=e,S.innerHTML.replaceAll('"',"&quot;").replaceAll("'","&#39;")):e}function o(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}function i(e,t){return new Proxy(e,{get(e,n){if("isProxy"==n)return!0;const o=e[n];return void 0===o?"":null!=o?(o.isProxy||"object"!=typeof o||(e[n]=i(o,t)),e[n]):void 0},set:(e,o,i)=>(e[o]=n(i),t&&t(),!0)})}function a(){window.bay.route.href=window.location.href,window.bay.route.protocol=window.location.protocol,window.bay.route.host=window.location.host,window.bay.route.hostname=window.location.hostname,window.bay.route.port=window.location.port,window.bay.route.path=window.location.pathname,window.bay.route.search=window.location.search,window.bay.route.hash=window.location.hash,window.bay.route.params={};let e=new URLSearchParams(window.location.search);for(let[t,n]of e)window.bay.route.params[t]=n}function r(e){if("function"==typeof crypto.randomUUID)return crypto.randomUUID().replaceAll("-","").substring(0,e);{let t=()=>([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));return t().replaceAll("-","").substring(0,e)}}function s(e){const t=[..._(e,"[bay]")];t.forEach((e,t)=>{"dsd"===e.getAttribute("bay")&&e.setAttribute("bay",`dsd-${t}`);let n=e.getAttribute("bay")||"";-1===T.indexOf(n)&&T.push(e)}),T.forEach(e=>{-1===M.indexOf(e.getAttribute("bay"))&&c(e),M.push(e.getAttribute("bay"))})}function l(e,t){const n=new DOMParser;let o,i="",a=t.tagName.toLowerCase(),r="export default /*HTML*/`";for(e.startsWith(r)&&(e=e.trim(),e=e.split(r)[1],e=e.substring(0,e.length-2),e=e.replaceAll("\\${","${").replaceAll("\\`","`"));e.indexOf("<style>")>-1;){const t=e.split("<style>")[1].split("</style>")[0];e=e.replaceAll(`<style>${t}</style>`,""),i+=t}e=e.replaceAll(/<!--[\s\S]*?-->/g,""),o=n.parseFromString(e,"text/html"),o&&(customElements.get(a)||$(o,a,h(t),i,!1))}function d(e,t,n){const o=new DOMParser;let i,a="",r=n||[];t.indexOf("<style>")>-1&&(a=t.split("<style>")[1].split("</style>")[0]),t=t.replaceAll(/<!--[\s\S]*?-->/g,"").replaceAll(`<style>${a}</style>`,""),i=o.parseFromString(t,"text/html"),i&&(customElements.get(e.toLowerCase())||$(i,e.toLowerCase(),r,a,!0))}function c(e){try{const t=e.getAttribute("bay")||"";if("dsd-"===t.substring(0,4))x=t,e.shadowRoot?l(o(e.shadowRoot.innerHTML),e):l(o(_(e,"template")[0].innerHTML),e);else if("#"===t.substring(0,1)){x=t;const n=_(document,t)[0];if(!n)return void console.error(`Bay cannot find "${t}" selector.`);l(n.innerHTML,e)}else{const n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","text/plain"),n.addEventListener("load",t=>{l(t.target.responseText,e)}),n.addEventListener("error",e=>{console.error(e)}),n.send()}}catch(e){console.error(e)}}function h(e){let t=[];const n=e=>{"bay"!==e.name&&"inner-html"!==e.name&&"fouc"!==e.name&&-1===t.indexOf(e.name)&&t.push(e.name)};return[...e.attributes].forEach(e=>n(e)),[..._(document,e.tagName.toLocaleLowerCase())].forEach(e=>{const t=[...e.attributes];t.forEach(e=>n(e))}),[..._(document,"template")].forEach(t=>{[..._(t.content,e.tagName.toLocaleLowerCase())].forEach(e=>{const t=[...e.attributes];t.forEach(e=>n(e))})}),t}function u(e){const t=new DOMParser,n=t.parseFromString(e,"text/html");return n.body}function p(e){return 3===e.nodeType?"text":8===e.nodeType?"comment":e.tagName.toLowerCase()}function b(e){return e.childNodes&&e.childNodes.length>0?null:e.textContent}function w(e,t){const n=[...t.childNodes],o=[...e.childNodes];let i=n.length-o.length;if(i>0)for(;i>0;i--)n[n.length-i].parentNode.removeChild(n[n.length-i]);o.forEach((e,o)=>{if(!n[o])return void t.appendChild(e.cloneNode(!0));if(p(e)!==p(n[o])){try{n[o].parentNode.replaceChild(e.cloneNode(!0),n[o])}catch(e){}return}const i=b(e);if(i&&i!==b(n[o])&&(n[o].textContent=i),n[o].childNodes.length>0&&e.childNodes.length<1)n[o].innerHTML="";else{if(n[o].childNodes.length<1&&e.childNodes.length>0){const t=document.createDocumentFragment();return w(e,t),void n[o].appendChild(t)}e.childNodes.length>0&&w(e,n[o])}})}function y(e,t){return void 0!==e[t]&&"object"!=typeof e[t]}function m(e,t){[...t.attributes].forEach(n=>{"style"!==n.name&&(e.hasAttribute(n.name)||(t.removeAttribute(n.nodeName),y(t,n.nodeName)&&delete t[n.nodeName]))}),[...e.attributes].forEach(e=>{t.hasAttribute(e.nodeName)&&t.getAttribute(e.nodeName)===e.value||t.setAttribute(e.nodeName,e.value),y(t,e.nodeName)&&t[e.nodeName]!==e.value&&(t[e.nodeName]=e.value)})}function f(e){for(;e.attributes.length>0;)e.removeAttribute(e.attributes[0].name)}function $(e,t,l,d,c){let h="",p=null,b="",y=[],$=!1,T=!1,M=!1;try{const n="*:not(:defined){opacity:0;max-width:0px;max-height:0px}*:not(:defined)*{opacity:0;max-width:0px;max-height:0px}.bay-hide{display:none}";d=n+(d||""),p=e.body,h=t;const o=document.createElement(`${t}-update`);p.appendChild(o),(p.innerHTML.indexOf("$global.")>-1||p.innerHTML.indexOf("$global[")>-1)&&($=!0),(p.innerHTML.indexOf("$route.")>-1||p.innerHTML.indexOf("$route[")>-1||p.innerHTML.indexOf("</router>")>-1||p.innerHTML.indexOf("</route>")>-1||p.innerHTML.indexOf("$bay.update_route")>-1)&&(T=!0),p.innerHTML.indexOf("</route>")>-1&&(d=(d||"")+"[bay-route]>*{pointer-events:none}"),p.innerHTML.indexOf("</show>")>-1&&bay.create(`show-${N}`,O,["open","transition"]);const i="element, index, array";let a="";const s=(e,t)=>{const n=_(e,t)[0];if(!n){const n=e.getAttribute("array")||[],o=e.getAttribute("params")||i,s=e.getAttribute("join")||"",l=e.getAttribute("duration")||!1,d=[...e.attributes][0]?[...e.attributes][0].nodeValue:"",c=e.nextElementSibling?e.nextElementSibling.tagName.toLowerCase():"";let h="` } return '' })() }";const u=e.hasAttribute("break")?"break;":"",b=0===e.innerHTML.length,w=e.attributes.length?e.attributes[0].name:"",y=`<${t}>`,m=`</${t}>`,$=[...e.attributes];f(e);let v=e.outerHTML;switch(t){case"dsd":e.remove();break;case"noscript":p.innerHTML=p.innerHTML.replaceAll(y,"").replaceAll(m,"");break;case"map":v=v.replace(y,`\${ ${n}.${t}((${o}) => { return \``).replace(m,`\`}).join('${s}')}`),e.outerHTML=v;break;case"for":const i=`bay_${t}_${r(8)}`;v=n.length?v.replace(y,`\${(() => { let ${i} = ''; ${n}.forEach((${o}) => { ${i} += \``).replace(m,`\`}); return ${i}; })() }`):v.replace(y,`\${(() => { let ${i} = ''; ${t} (${d}) { ${i} += \``).replace(m,`\`}; return ${i}; })() }`),e.outerHTML=v;break;case"if":"else-if"!==c&&"else"!==c||(h="` }"),e.outerHTML=v.replace(y,`\${(() => { ${t} (${d}) { return \``).replace(m,h);break;case"else-if":"else-if"!==c&&"else"!==c||(h="` }"),e.outerHTML=v.replace(y,` else if (${d}) { return \``).replace(m,h);break;case"else":e.outerHTML=v.replace(y,` ${t} { return \``).replace(m,h);break;case"show":e.outerHTML=l?v.replace(y,`<show-${N} class="bay-show" open="\${${d}}" transition="${l} ease-in-out">`).replace(m,`</show-${N}>`):v.replace(y,`<div class="\${(${d}) ? 'bay-show' : 'bay-show bay-hide'}">`).replace(m,"</div>");break;case"switch":e.outerHTML=v.replace(y,`\${(() => { ${t} (${d}) { `).replace(m," }; return '' })() }");break;case"case":e.outerHTML=b?v.replace(y,`${t} ${d}:`).replace(m," "+u):v.replace(y,`${t} ${d}: return \``).replace(m,"`; "+u);break;case"default":e.outerHTML=v.replace(y,`${t}: return \``).replace(m,"`;");break;case"inner-html":M=!0,e.outerHTML=v.replace(y,"${ (() => { $bay_inner_html += `").replace(m,"`; return ''} )()}"),e.remove();break;case"route":let f="";$.forEach(e=>{f+=` ${e.name}="${e.value}"`}),e.outerHTML=v.replace(y,`<a bay-route :click="e.preventDefault();history.pushState({},'',e.target.getAttribute('href'));window.bay.update_route();"${f}>`).replace(m,"</a>");break;case"router":e.outerHTML=v.replace(y,`\${(() => { let $path = window.bay.router(window.bay.route.path,'${d}'); if ($path) { return \``).replace(m,h);break;case"script":switch(w){case"update":v=v.replace(y,"${/*update*/ (() => {setTimeout(() => {").replace(m,"}, 0); return ``})()}");break;case"props":v=v.replace(y,"${ /*props updates*/ (() => {$props = () => {").replace(m,"};return ``})()}");break;case"render":v=v.replace(y,"${ /*render*/ (() => {").replace(m,"})()}");break;case"slotchange":v=v.replace(y,"${ /*slotchange updates*/ (() => {$slotchange = (e) => { $details = e.detail;\n").replace(m,"};return ``})()}");break;case"mounted":a+=`$bay['$mounted'] = () => {${e.innerText}};`,e.remove();break;default:const n=_(p,t)[0];a+=n.innerText,e.remove()}e&&e.parentNode&&(e.outerHTML=v,e.remove())}}};["dsd","noscript","map","for","if","else-if","else","show","switch","case","default","inner-html","route","router","script"].forEach(e=>{for(;[..._(p,e)].length>0;){const t=[..._(p,e)];t.forEach(t=>s(t,e))}});let c=!1;[..._(p,"*")].forEach(e=>{[...e.attributes].forEach(t=>{let n=":"===t.name.substring(0,1),o="bind"===t.name,i="bind:"===t.name.substring(0,5),a="select"===e.tagName.toLowerCase(),r="input"===e.tagName.toLowerCase(),s="textarea"===e.tagName.toLowerCase();if(n){let n=t.name.split(":")[1];e.setAttribute(`${A}${n}`,t.value),e.removeAttribute(t.name)}else if(o&&a)e.setAttribute("data-select-bind",t.value),e.hasAttribute("multiple")&&e.setAttribute("multiple","true"),e.removeAttribute(t.name),e.innerHTML=`\${$bay.bay_select_bind('${t.value}', ${t.value})}`,c=!0;else if(o&&(r||s))e.setAttribute(`${A}input`,`${t.value} = e.target.value`),e.removeAttribute(t.name),e.setAttribute("value",`\${${t.value}}`);else if(i&&(r||s)){let n=t.name.split(":")[1];e.setAttribute(`${A}${n}`,`${t.value} = e.target.value`),e.removeAttribute(t.name),e.setAttribute("value",`\${setTimeout(() => {${t.value}},1000);}`)}})}),c&&(a+="$bay.bay_select_bind = function (proxy_name, proxy_value) {\n          let binds = [...$bay.querySelectorAll(`[data-select-bind=\"${proxy_name}\"]`)];\n          binds.forEach((el, i) => {\n            el.onchange = function (e) {\n              [...e.target.options].forEach((o, i) => proxy_value[i].selected = o.selected);\n            };\n            let options = [...el.querySelectorAll('option')];\n            options.forEach((el, i) => {\n              el.selected = proxy_value[i].selected;\n            });\n          });\n          return proxy_value.map((item, i, array) => {\n            let opt = document.createElement('option');\n            const optionValues = Object.entries(item);\n            optionValues.forEach(entry => {\n              if (entry[0] === 'selected' && entry[1]) {\n                opt.selected = true;\n                opt.setAttribute('selected', true);\n              } else if (entry[0] === 'text') {\n                opt.textContent = entry[1];\n              } else {\n                opt[entry[0]] = entry[1];\n              }\n            });\n            return opt.outerHTML;\n          }).join('');\n        }".replace(/\s+/g," ").trim()),b=a,y=l}catch(e){console.error(e)}h?customElements.define(h,class extends HTMLElement{constructor(){super(),this.oldEventsArray=[],this.newEventsArray=[],this.mounted=!1,this.original_template=`${p.innerHTML}`,this.uniqid=r(8),this.CSP_errors=!1,this.dsd=!1,this.debouncer=!1,this.blob_prefixes="",this.blob_event_prefixes="";const e=this.getAttribute("inner-html");if(e?_(document,e)[0]?this.inner_html_target=_(document,e)[0]:console.error("inner-html target "+e+" not found."):this.inner_html_target=this,document.addEventListener("securitypolicyviolation",e=>{e.preventDefault(),e.violatedDirective.indexOf("script-src")>-1&&"blob"===e.blockedURI&&(console.warn("blob: needed in script-src CSP"),this.CSP_errors=!0),e.violatedDirective.indexOf("style-src")>-1&&"blob"===e.blockedURI&&(console.warn("blob: needed in style-src CSP"),this.CSP_errors=!0)}),this.shadowRoot){this.shadowDom=this.shadowRoot;const e=[...this.shadowDom.children],t=document.createElement("div");t.id="bay",e.map(e=>t.appendChild(e)),this.shadowRoot.appendChild(t),this.dsd=!0}else{this.attachShadow({mode:"open"}),this.shadowDom=this.shadowRoot;let e=document.createElement("template");e.innerHTML='<div id="bay"></div>',this.shadowDom.appendChild(e.content.cloneNode(!0))}this.shadowDom.proxy=i({},()=>{this.render_debouncer()}),this.shadowRootHTML=_(this.shadowDom,"#bay")[0],window.bay[this.uniqid]=this.shadowDom,[...l].forEach(e=>{this.shadowDom.proxy[e.att]=e.value}),window.bay[this.uniqid][E]=this,this.oldEvents="",this.oldEventsArray=[],b||(b="/* No script tag found */"),this.shadowDom.uniqid=this.uniqid;let t=this.getRootNode(),s="",c="",h="";t.host&&(s="const $parent = window.bay[parent_uniqid]['proxy'];\n",c=`const $parent = window.bay['${t.host.uniqid}']['proxy'];\n`,h=t.host.uniqid);const u=`const ${v} = window.bay[bay_uniqid];\n`,w=`const ${v} = window.bay['${this.uniqid}'];\n`,y=`const ${g} = window.bay.global;\n`,m=`const ${L} = window.bay.route;\n`,f=`const ${E} = ${v}['${E}'];\n`;this.local_update_evt=new CustomEvent(`bay_local_update_event_${this.uniqid}`);let $="";this.original_template.indexOf("/*props updates*/")>-1&&($="let $props;\nwindow.addEventListener(`bay_local_update_event_${bay_uniqid}`, () => $props());\n");let A="";this.original_template.indexOf("/*slotchange updates*/")>-1&&($="let $slotchange = () => {};\nlet $details = {'element': '', 'changed': ''};\nwindow.addEventListener(`bay_slotchange_event_${bay_uniqid}`, (e) => $slotchange(e));\n"),window.bay.decode=o;const x="$bay.decode = window.bay.decode;\n";window.bay.encode=n;const H="$bay.encode = window.bay.encode;\n";window.bay.update_route=a;let S="";T&&(S="$bay.update_route = window.bay.update_route;\n"),window.bay[this.uniqid].addEventListener("slotchange",e=>{this.local_slotchange_evt=new CustomEvent(`bay_slotchange_event_${this.uniqid}`,{detail:{element:e.target,changed:"slotchange"}}),window.dispatchEvent(this.local_slotchange_evt)});let q=_(this,"*");q.forEach(e=>{const t=new MutationObserver(t=>{t.forEach(t=>{"attributes"===t.type?(this.local_slotchange_evt=new CustomEvent(`bay_slotchange_event_${this.uniqid}`,{detail:{element:e,changed:"attributes"}}),window.dispatchEvent(this.local_slotchange_evt)):"childList"===t.type&&(this.local_slotchange_evt=new CustomEvent(`bay_slotchange_event_${this.uniqid}`,{detail:{element:e,changed:"childList"}}),window.dispatchEvent(this.local_slotchange_evt))})});t.observe(e,{attributes:!0,childList:!0})});let C="",N="",O="";M&&(C="let $bay_inner_html = '';\n",N=" $bay_inner_html = ''; ",O="\n$bay.inner_html = () => { return $bay_inner_html; };"),this.blob_prefixes=`${u}${y}${m}${f}${s}${C}${H}${x}${$}${A}${S}`,this.blob_event_prefixes=`${w}${y}${m}${f}${c}${H}${x}${S}`;let k=`${this.blob_prefixes}`+o(b).replaceAll("this[",`${v}.proxy[`).replaceAll("this.",`${v}.proxy.`).replace(/(^[ \t]*\n)/gm,""),R=o(this.original_template).replaceAll("this[",`${v}.proxy[`).replaceAll("this.",`${v}.proxy.`).replace(/(^[ \t]*\n)/gm,""),D="";if(d&&(D=o(d).replaceAll('"${',"${").replaceAll("'${","${").replaceAll('}"',"}").replaceAll("}'","}").replaceAll("this[",`${v}.proxy[`).replaceAll("this.",`${v}.proxy.`).replaceAll("  ","").replaceAll("\n","")),this.add_JS_BlobFileToHead(`${k}\n${v}.template = () => {${N}return \`${R}\`;};\n${v}.styles = () => { return \`${D}\`;};${O}`,h),this.hasAdoptedStyleSheets=!1,"adoptedStyleSheets"in document&&(this.hasAdoptedStyleSheets=!0),this.hasAdoptedStyleSheets)this.sheet=new CSSStyleSheet,this.sheet.replaceSync(D),this.shadowDom.adoptedStyleSheets=[this.sheet];else{const e=new Blob([D],{type:"text/css"});let t=URL.createObjectURL(e),n=document.createElement("link");n.rel="stylesheet",n.href=t,this.shadowDom.appendChild(n),n.id="bay-style";let o=document.createElement("link");o.id="bay-style-update",o.href=t,o.rel="stylesheet",this.shadowDom.appendChild(o),this.styleLinkUpdate=o}}apply_events(e,t,n){let o=e.name.indexOf(A)>-1;if(o)if(e.name.indexOf(`${A}style`)>-1)t.style!==e.value&&(t.style=e.value);else{let o=e.value.replaceAll("window.bay",`${v}`);-1===this.newEvents.indexOf(`${v}[${n}] = {};`)&&(this.newEvents+=`${v}[${n}] = {};`,this.newEventsArray.push(n)),this.newEvents+=`${v}[${n}]['${e.name}'] = function(e) {${o}};\n`,t[`on${e.name.split(A)[1]}`]=(t=>{window.bay[this.uniqid][n]&&window.bay[this.uniqid][n][e.name]&&window.bay[this.uniqid][n][e.name](t)})}}add_events(e){e&&(this.newEvents="",this.newEventsArray=[],e.forEach((e,t)=>{[...e.attributes].forEach(n=>this.apply_events(n,e,t))}),this.oldEventsArray.forEach(e=>{-1===this.newEventsArray.indexOf(e)&&delete window.bay[this.uniqid][e]}),this.newEvents&&this.oldEvents!==this.newEvents&&(this.oldEvents=this.newEvents,this.oldEventsArray=this.newEventsArray,this.add_JS_Blob_event(this.newEvents)))}set_styles(){const e=window.bay[this.uniqid].styles();if(this.oldStyles!==e)if(this.oldStyles=e,this.hasAdoptedStyleSheets)this.sheet.replaceSync(e);else{var t=new Blob([e],{type:"text/css"}),n=URL.createObjectURL(t);this.styleLinkUpdate.href=n,URL.revokeObjectURL(n)}}isEqual_fn(e,t){e.forEach((e,n)=>{const o=t[n].isEqualNode(e);if(!o&&t[n]&&m(e,t[n]),!e.hasAttribute(`${A}style`)&&!e.hasAttribute("style")){let e=t[n].style.width,o=t[n].style.height;t[n].removeAttribute("style"),e&&(t[n].style.width=e),o&&(t[n].style.height=o)}})}render_innerHTML(e){if(!e)return;if("function"!=typeof window.bay[this.uniqid].inner_html)return;window.bay[this.uniqid].template();const t=u(window.bay[this.uniqid].inner_html());w(t,e),this.isEqual_fn([..._(t,"*")],[..._(e,"*")])}render_shadowDOM(){const e=u(window.bay[this.uniqid].template());w(e,this.shadowRootHTML),this.isEqual_fn([..._(e,"*")],[..._(this.shadowRootHTML,"*")])}render_debouncer(){this.debouncer&&window.cancelAnimationFrame(this.debouncer),this.debouncer=window.requestAnimationFrame(()=>{this.render()})}render(){if(this.CSP_errors)this.shadowDom.innerHTML="";else if(this.original_template&&this.shadowRootHTML.innerHTML&&"function"==typeof window.bay[this.uniqid].template)try{M&&this.render_innerHTML(this.inner_html_target),this.render_shadowDOM(),M?this.add_events([..._(this.inner_html_target,"*"),..._(this.shadowRootHTML,"*")]):this.add_events([..._(this.shadowRootHTML,"*")]),this.set_styles(),!1===this.mounted&&window.bay[this.uniqid].$mounted&&(this.mounted=!0,setTimeout(()=>{window.bay[this.uniqid].$mounted()},14)),_(this.shadowDom,"[bay]")[0]&&s(this.shadowDom),this.hasAttribute("fouc")&&this.removeAttribute("fouc")}catch(e){console.error(e)}}add_JS_Blob_event(e){return __awaiter(this,void 0,void 0,function*(){const t=new Blob([`export default () => {"use strict";\n${this.blob_event_prefixes}${e}};`],{type:"text/javascript"}),n=URL.createObjectURL(t),o=yield import(n);o.default(),URL.revokeObjectURL(n)})}add_JS_BlobFileToHead(e,n){return __awaiter(this,void 0,void 0,function*(){if(H[t])yield import(H[t]).then(e=>{e.default(this.uniqid,n),this.after_blob_loaded()});else{const o=new Blob([`export default (bay_uniqid, parent_uniqid) => {"use strict";\n${e}};`],{type:"text/javascript"}),i=URL.createObjectURL(o);H[t]=i,yield import(i).then(e=>{e.default(this.uniqid,n),this.after_blob_loaded(),c&&URL.revokeObjectURL(i)})}})}after_blob_loaded(){this.dsd||(this.original_template=window.bay[this.uniqid].template(),this.shadowDom.getElementById("bay").innerHTML=this.original_template),this.render_debouncer(),this.CSP_errors?this.shadowDom.innerHTML="CSP issue, add blob: to script-src & style-src whitelist.":_(this.shadowDom,"[bay]")[0]&&s(this.shadowDom)}connectedCallback(){try{$&&window.addEventListener("bay_global_event",e=>{this.render_debouncer()}),T&&window.addEventListener("bay_route_event",e=>{this.render_debouncer()})}catch(e){console.error(e)}}static get observedAttributes(){return y}attributeChangedCallback(e,t,n){t!==n&&(this.shadowDom.proxy[e]=n,window.dispatchEvent(this.local_update_evt))}}):console.error("Something went wrong loading file "+x+".")}const _=(e,t)=>e.querySelectorAll(t),v="$bay",g="$global",L="$route",E="$el",A="data-bay-";window.bay={};let x="",T=[],M=[],H={};(function e(t){_(t,"template[shadowrootmode], template[shadowroot]").forEach(t=>{const n=t.getAttribute("shadowrootmode")||t.getAttribute("shadowroot"),o=t.parentNode.attachShadow({mode:n});o.appendChild(t.content),t.remove(),e(o)})})(document);const S=document.createElement("textarea");let q,C;window.bay.global=i({},()=>{q&&window.cancelAnimationFrame(q),q=window.requestAnimationFrame(()=>{e()})}),window.bay.route=i({},()=>{C&&window.cancelAnimationFrame(C),C=window.requestAnimationFrame(()=>{t()})}),a(),window.addEventListener("popstate",()=>{a()}),window.bay.router=function(e,t){const n=t.split("/"),o=e.split("/");let i=!0,a={};for(let e=0;e<n.length;e++)if(":"===n[e][0])a[n[e].slice(1)]=o[e];else if("*"!==n[e]&&n[e]!==o[e]){i=!1;break}return!!i&&a};const N=r(8),O="\n  <div id=\"show\" :style=\"${this.style()}\"><slot></slot></div>\n  <script update>$bay.getElementById('show').ontransitionend = () => this.end();</script>\n  <script props>this.slide(this.open);</script>\n  <script mounted>this.slide(this.open);</script>\n  <script>\n    this.opacity = 0;\n    this.display = 'none';\n    this.slide = (open) => {\n      let opacity = 0;\n      if (open === 'true') {opacity = 1; this.display = 'block';}\n      requestAnimationFrame(() => {this.opacity = opacity;});};\n    this.end = () => {if (this.open === 'false') { this.display = 'none';}}\n    this.style = () => {return `display:${this.display}; opacity:${this.opacity}; transition: opacity ${this.transition || '0s'};`;};\n  </script>\n";window.addEventListener("load",()=>{s(document)}),bay.refresh=(()=>{s(document)}),bay.create=d};export default bay;